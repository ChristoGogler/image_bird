<!DOCTYPE html>
<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="css/style.css" />
        <title>The Image BðŸª¶rd</title>
    </head>
    <body>
        <header></header>
        <main id="main">
            <a href="/"
                ><img
                    class="logo"
                    src="./img/logo.png"
                    alt="LOGO - The Image BðŸª¶rd"
            /></a>
            <section id="uploadForm">
                <form
                    id="uploadForm"
                    enctype="multipart/form-data"
                    action="/api/upload"
                    method="POST"
                >
                    <input
                        class="textfield"
                        id="title"
                        type="text"
                        name="title"
                        placeholder="title"
                        v-model="title"
                    />
                    <input
                        class="textfield"
                        id="description"
                        type="text"
                        name="description"
                        placeholder="description"
                        v-model="description"
                    />
                    <input
                        class="textfield"
                        id="username"
                        type="text"
                        name="username"
                        placeholder="username"
                        v-model="username"
                    />
                    <input
                        class="textfield"
                        id="picture"
                        type="file"
                        accept="image/*"
                        name="picture"
                        v-on:change="insertFile"
                        required
                    />
                    <button
                        class="button submitButton"
                        v-on:click="uploadFile"
                        type="submit"
                    >
                        <img src="./img/iconupload.png" alt="upload" />
                    </button>
                </form>
            </section>
            <section id="board" class="board">
                <single-picture
                    v-for="image in images"
                    v-bind:id="image.id"
                    v-bind:url="image.url"
                    v-bind:title="image.title"
                    v-bind:description="image.description"
                    v-bind:username="image.username"
                    @image-clicked="openSinglePic(image.id)"
                ></single-picture>
            </section>
            <light-box
                v-if="lightboxVisible"
                :id="currentImageId"
                @button-clicked="closeSinglePic()"
            >
            </light-box>
        </main>
        <footer></footer>

        <script src="/js/vue.js"></script>
        <script src="/js/axios.min.js"></script>
        <script src="js/script.js"></script>
        <!-- single-picture component -->

        <script id="singlePicture" type="text/x-template">
            <div class="photoframe" @click="emitClick(id)">
                <img class="thumbnail" v-bind:src="url" v-bind:alt="title" />
                <p>{{title}}</p>
            </div>
        </script>
        <script id="lightBox" type="text/x-template">
            <div class="backdrop">
                <article class="imageWrapper">
                    <h1 class="heading">{{image.title}}</h1>
                    <img class="lightboxImg" :src="image.url" :alt="image.title" />
                    <aside class="imgDetails">
                        <p>{{image.description}}</p>
                        <button class="button closeButton" @click="emitClick()">Ã—</button>
                    </aside>
                    <comments v-bind:image_id="id">
                        </comments>
                </article>
            </div>
        </script>
        <script id="comments" type="text/x-template">

            <div v-if="comments.length > 0">
                <ul>
                    <li v-for='comment in comments'>
                        <div>
                            <p>comment component</p>
                            <p>{{comment.username}}</p>
                        </div>
                    </li>

                </ul>
            </div>
            <div v-else>
                <p>no comments yet!</p>
            </div>
        </script>
    </body>
</html>
